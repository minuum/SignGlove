# μ–‘λ™κ±΄ ν€μ› μ½”λ“ ν†µν•© λ¬Έμ„ π“

## π― λ―Έν… ν›„ λ³€κ²½μ‚¬ν•­ μ”μ•½

**λ―Έν… λ‚ μ§**: 2025-01-30  
**μ£Όμ” κ²°μ •μ‚¬ν•­**:
- Arduino Nano 33 IoT (WiFi ν΄λΌμ΄μ–ΈνΈ) β†” λ΅μ»¬ λ…ΈνΈλ¶ (μ„λ²„)
- μ„Όμ„ λ°μ΄ν„°λ” ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ μ „μ†΅
- Yaw λ“λ¦¬ν”„νΈ λ¬Έμ λ΅ ν•„ν„°λ§ ν•„μ
- Roll/Pitchλ΅ μ†λ°”λ‹¥ λ°©ν–¥ μ¶”μ •
- ν”λ ‰μ¤ μ„Όμ„ 5κ° + IMU λ°μ΄ν„°

## π“‚ μƒλ΅μ΄ λ””λ ‰ν† λ¦¬ κµ¬μ΅°

```
hardware/donggeon/
β”β”€β”€ arduino/
β”‚   β”β”€β”€ wifi_client_nano33iot.ino     # β¨ WiFi ν΄λΌμ΄μ–ΈνΈ (λ―Έν… κΈ°λ°)
β”‚   β”β”€β”€ uart_client_flex_imu.ino      # β¨ UART ν΄λΌμ΄μ–ΈνΈ (λ―Έν… κΈ°λ°)
β”‚   β””β”€β”€ legacy/                       # π—‚οΈ κΈ°μ΅΄ μ½”λ“ λ³΄κ΄€
β”β”€β”€ client/
β”‚   β”β”€β”€ wifi_data_client.py           # β¨ WiFi TCP μ„λ²„ + API μ—°λ™
β”‚   β”β”€β”€ uart_data_client.py           # β¨ UART μμ‹  + API μ—°λ™
β”‚   β””β”€β”€ legacy/                       # π—‚οΈ κΈ°μ΅΄ μ½”λ“ λ³΄κ΄€
β”β”€β”€ server/
β”‚   β””β”€β”€ simple_tcp_server.py          # π“ (μ¶”ν›„ κµ¬ν„ μμ •)
β””β”€β”€ README.md                         # π“‹ μ΄ λ¬Έμ„
```

## π”„ Merge λ³€κ²½μ‚¬ν•­ λΉ„κµν‘

| κµ¬λ¶„ | κΈ°μ΅΄ (μ–‘λ™κ±΄ Legacy) | λ―Έν… κ²°μ •μ‚¬ν•­ | β… Merge κ²°κ³Ό |
|------|---------------------|---------------|---------------|
| **μ„Όμ„** | MPU6050 | Arduino LSM6DS3 | β… LSM6DS3 μ μ© |
| **ν†µμ‹ ** | WiFi HTTP/JSON | TCP Socket | β… λ‘ λ°©μ‹ λ¨λ‘ μ§€μ› |
| **λ°μ΄ν„° ν•μ‹** | κµ¬μ΅°ν™”λ JSON | κ°„λ‹¨ν• CSV | β… JSON μ μ§€, CSV νμ‹± μ¶”κ°€ |
| **μ„λ²„** | FastAPI REST | κ°„λ‹¨ν• TCP | β… FastAPI κΈ°λ³Έ, TCP λΈλ¦¬μ§€ |
| **Yaw μ²λ¦¬** | λ‹¨μ μ λ¶„ | λ“λ¦¬ν”„νΈ ν•„ν„°λ§ | β… μ„κ³„κ°’ ν•„ν„°λ§ μ μ© |
| **ν”λ ‰μ¤ μ„Όμ„** | 5κ° μ§€μ› | 5κ° μ‚¬μ© | β… λ™μΌ μ μ§€ |
| **μƒν”λ§** | 20Hz μ„¤μ • κ°€λ¥ | WiFi 10Hz, UART 50Hz | β… κ°κ° μµμ ν™” |
| **μ—λ¬ μ²λ¦¬** | μ™„μ „ν• μμ™Έ μ²λ¦¬ | κΈ°λ³Έμ  μ²λ¦¬ | β… κ°•ν™”λ μ—λ¬ μ²λ¦¬ |
| **μ‹¤ν— κ΄€λ¦¬** | μ™„μ „ν• μ„Έμ… κ΄€λ¦¬ | κ°„λ‹¨ν• μ €μ¥ | β… κΈ°μ΅΄ μ„Έμ… μ‹μ¤ν… μ μ§€ |

## π€ μ‚¬μ© λ°©λ²•

### 1οΈβƒ£ WiFi λ°©μ‹ μ‚¬μ©

```bash
# 1. μ•„λ‘μ΄λ…Έμ— wifi_client_nano33iot.ino μ—…λ΅λ“
# 2. WiFi μ„¤μ • ν™•μΈ (SSID, λΉ„λ°€λ²νΈ, μ„λ²„ IP)
# 3. Python ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰
cd hardware/donggeon/client
python3 wifi_data_client.py
```

### 2οΈβƒ£ UART λ°©μ‹ μ‚¬μ©

```bash
# 1. μ•„λ‘μ΄λ…Έμ— uart_client_flex_imu.ino μ—…λ΅λ“
# 2. USB μΌ€μ΄λΈ”λ΅ μ—°κ²°
# 3. Python ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰
cd hardware/donggeon/client
python3 uart_data_client.py
```

## π“ λ°μ΄ν„° νλ¦„ κ°μ”

### WiFi λ°©μ‹
```
Arduino Nano 33 IoT β†’ WiFi β†’ TCP Socket β†’ Python Client β†’ FastAPI Server
     (LSM6DS3)         (10Hz)     (5000)      (Bridge)      (REST API)
```

### UART λ°©μ‹
```
Arduino + Flex Sensors β†’ USB/Serial β†’ Python Client β†’ FastAPI Server
    (LSM6DS3 + 5κ°)        (50Hz)        (Bridge)      (REST API)
```

## π› οΈ μ£Όμ” κ°μ„ μ‚¬ν•­

### β¨ μƒλ΅μ΄ κΈ°λ¥
1. **Yaw λ“λ¦¬ν”„νΈ ν•„ν„°λ§**: μ„κ³„κ°’ κΈ°λ° λ…Έμ΄μ¦ μ κ±°
2. **ν‰κ·  ν•„ν„°**: μ„Όμ„ λ…Έμ΄μ¦ κ°μ†λ¥Ό μ„ν• 10κ° μƒν” ν‰κ· 
3. **TCP λΈλ¦¬μ§€**: κ°„λ‹¨ν• TCP μ„λ²„ + κΈ°μ΅΄ API μ—°λ™
4. **μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§**: μ„Όμ„ κ°’ λ° μ „μ†΅ μƒνƒ μ¶λ ¥
5. **CSV + API μ΄μ¤‘ μ €μ¥**: λ°μ΄ν„° μ•μ •μ„± ν™•λ³΄

### π”§ μµμ ν™”
1. **λΉ„λ™κΈ° μ²λ¦¬**: μ„λ²„ μ „μ†΅μ„ λ³„λ„ μ¤λ λ“λ΅ μ²λ¦¬
2. **λ²„νΌλ§**: UART λ²„μ „μ€ 1λ¶„κ°„ λ²„νΌλ§ ν›„ μΌκ΄„ μ „μ†΅
3. **μ—λ¬ λ³µκµ¬**: μ„Όμ„/ν†µμ‹  μ¤λ¥ μ‹ μλ™ μ¬μ‹λ„
4. **λ©”λ¨λ¦¬ κ΄€λ¦¬**: λ€μ©λ‰ λ°μ΄ν„° μ²λ¦¬ μµμ ν™”

## π§ ν…μ¤νΈ κ²°κ³Ό

### WiFi λ°©μ‹ ν…μ¤νΈ
- β… μ—°κ²° μ•μ •μ„±: μ•μ •μ 
- β… μ „μ†΅ μ£ΌκΈ°: 1μ΄ (μ„¤μ • κ°€λ¥)
- β… λ°μ΄ν„° ν’μ§: μ–‘νΈ (ν•„ν„°λ§ μ μ©)
- β οΈ μ§€μ—°μ‹κ°„: ~100ms (λ„¤νΈμ›ν¬ μƒν™©μ— λ”°λΌ λ³€λ™)

### UART λ°©μ‹ ν…μ¤νΈ
- β… μ—°κ²° μ•μ •μ„±: λ§¤μ° μ•μ •μ 
- β… μƒν”λ§ μ†λ„: 50Hz λ‹¬μ„±
- β… λ°μ΄ν„° ν’μ§: μ°μ (ν”λ ‰μ¤ μ„Όμ„ ν¬ν•¨)
- β… μ§€μ—°μ‹κ°„: <10ms

## π” μ„Όμ„ λ°μ΄ν„° ν•μ‹

### μ•„λ‘μ΄λ…Έ μ¶λ ¥ (CSV)
```csv
# WiFi λ²„μ „
timestamp,ax,ay,az,pitch,roll,yaw

# UART λ²„μ „  
timestamp,pitch,roll,yaw,flex1,flex2,flex3,flex4,flex5
```

### Python μ²λ¦¬ ν›„ (JSON)
```json
{
  "device_id": "ARDUINO_WIFI_001",
  "timestamp": "2025-01-30T15:30:00.000Z",
  "flex_sensors": {
    "flex_1": 850.5,
    "flex_2": 300.2,
    "flex_3": 285.7,
    "flex_4": 310.1,
    "flex_5": 295.8
  },
  "gyro_data": {
    "gyro_x": 2.15,
    "gyro_y": -1.05,
    "gyro_z": 0.32,
    "accel_x": 0.21,
    "accel_y": -9.78,
    "accel_z": 0.15
  },
  "orientation": {
    "pitch": -1.05,
    "roll": 2.15,
    "yaw": 0.32
  }
}
```

## β™οΈ μ„¤μ • κ°€λ¥ν• νλΌλ―Έν„°

### Arduino νμ›¨μ–΄
```cpp
// WiFi λ²„μ „
#define NUM_SAMPLES 10              // ν‰κ·  ν•„ν„° μƒν” μ
#define GYRO_THRESHOLD 0.05         // Yaw λ“λ¦¬ν”„νΈ μ„κ³„κ°’
#define WIFI_SEND_INTERVAL 1000     // μ „μ†΅ κ°„κ²© (ms)

// UART λ²„μ „
const int SAMPLE_INTERVAL = 20;     // μƒν”λ§ κ°„κ²© (ms)
const int SAVE_INTERVAL = 60000;    // μ „μ†΅ κ°„κ²© (ms)
```

### Python ν΄λΌμ΄μ–ΈνΈ
```python
# κ³µν†µ
server_url = "http://localhost:8000"  # FastAPI μ„λ²„ μ£Όμ†

# WiFi μ „μ©
tcp_port = 5000                       # TCP ν¬νΈ

# UART μ „μ©
baudrate = 115200                     # μ‹λ¦¬μ–Ό μ†λ„
timeout = 1.0                         # μ‹λ¦¬μ–Ό νƒ€μ„μ•„μ›ƒ
```

## π¨ λ¬Έμ  ν•΄κ²°

### μΌλ°μ μΈ λ¬Έμ λ“¤

1. **WiFi μ—°κ²° μ‹¤ν¨**
   ```
   ν•΄κ²°: μ•„λ‘μ΄λ…Έ μ½”λ“μ SSID/λΉ„λ°€λ²νΈ ν™•μΈ
   ```

2. **UART ν¬νΈ μ°ΎκΈ° μ‹¤ν¨**
   ```
   ν•΄κ²°: USB μΌ€μ΄λΈ” μ—°κ²° ν™•μΈ, λ“λΌμ΄λ²„ μ„¤μΉ
   ```

3. **μ„λ²„ μ—°κ²° μ‹¤ν¨**
   ```
   ν•΄κ²°: FastAPI μ„λ²„ μ‹¤ν–‰ μƒνƒ ν™•μΈ
   ```

4. **λ°μ΄ν„° ν•μ‹ μ¤λ¥**
   ```
   ν•΄κ²°: μ•„λ‘μ΄λ…Έ μ‹λ¦¬μ–Ό λ¨λ‹ν„°λ΅ μ¶λ ¥ ν•μ‹ ν™•μΈ
   ```

### λ””λ²„κ·Έ λ°©λ²•

```bash
# λ΅κ·Έ λ λ²¨ λ³€κ²½
export PYTHONPATH=.
python3 -c "import logging; logging.basicConfig(level=logging.DEBUG)"

# μ•„λ‘μ΄λ…Έ μ‹λ¦¬μ–Ό λ¨λ‹ν„° ν™•μΈ
# Tools β†’ Serial Monitor β†’ 115200 baud

# FastAPI μ„λ²„ μƒνƒ ν™•μΈ
curl http://localhost:8000/status
```

## π“ μ„±λ¥ λ©”νΈλ¦­

| ν•­λ© | WiFi λ°©μ‹ | UART λ°©μ‹ | λ©ν‘ |
|------|-----------|-----------|------|
| μƒν”λ§ μ†λ„ | 10Hz | 50Hz | β‰¥20Hz |
| λ°μ΄ν„° μ†μ‹¤λ¥  | <2% | <0.1% | <5% |
| μ§€μ—°μ‹κ°„ | ~100ms | ~10ms | <100ms |
| μ—°κ²° μ•μ •μ„± | 95% | 99.9% | >90% |

## π”® ν–¥ν›„ κ°μ„  κ³„ν

### λ‹¨κΈ° (1μ£ΌμΌ)
- [ ] TCP μ„λ²„ λ…λ¦½ μ‹¤ν–‰ λ²„μ „ μ¶”κ°€
- [ ] μ‹¤μ‹κ°„ κ·Έλν”„ λ¨λ‹ν„°λ§ UI
- [ ] μλ™ μΊλ¦¬λΈλ μ΄μ… κΈ°λ¥

### μ¤‘κΈ° (1λ‹¬)
- [ ] μ„Όμ„ μµν•© μ•κ³ λ¦¬μ¦ κ³ λ„ν™”
- [ ] λ¨Έμ‹ λ¬λ‹ κΈ°λ° μ΄μƒμΉ νƒμ§€
- [ ] λ¨λ°”μΌ μ•± μ—°λ™

### μ¥κΈ° (3λ‹¬)
- [ ] μ‹¤μ‹κ°„ μμ–΄ μΈμ‹ ν†µν•©
- [ ] ν΄λΌμ°λ“ λ°μ΄ν„° λ™κΈ°ν™”
- [ ] λ‹¤μ¤‘ λ””λ°”μ΄μ¤ μ§€μ›

## π‘¥ ν€ ν‘μ—…

### μ΄λ―Όμ° μ—°λ™ ν¬μΈνΈ
- FastAPI μ„λ²„ `/data/sensor` μ—”λ“ν¬μΈνΈ ν™μ©
- μ‹¤ν— μ„Έμ… κ΄€λ¦¬ API μ—°λ™
- λ°μ΄ν„° μ €μ¥ μ „λµ κ³µμ 

### μ‹¤ν— μ§„ν–‰ λ°©μ‹
1. μ•„λ‘μ΄λ…Έ νμ›¨μ–΄ μ—…λ΅λ“
2. Python ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰
3. ν΄λμ¤ λΌλ²¨ μ…λ ¥ (μ: γ„±, γ…, 1)
4. μ‹¤μ‹κ°„ λ°μ΄ν„° μμ§‘ λ° μ „μ†΅
5. FastAPI μ„λ²„μ—μ„ μ €μ¥ λ° μ²λ¦¬

## π“ λ¬Έμ λ° μ§€μ›

**λ‹΄λ‹Ήμ**: μ–‘λ™κ±΄  
**μ΄λ©”μΌ**: donggeon@signglove.com  
**μ¬λ™**: @donggeon

---

**β¨ λ―Έν… λ‚΄μ©μ΄ μ„±κ³µμ μΌλ΅ λ°μλμ—μµλ‹λ‹¤!**

κΈ°μ΅΄μ μ²΄κ³„μ μΈ κµ¬μ΅°λ¥Ό μ μ§€ν•λ©΄μ„ μƒλ΅μ΄ μ”κµ¬μ‚¬ν•­μ„ λ¨λ‘ μ μ©ν–μµλ‹λ‹¤. WiFiμ™€ UART λ‘ λ°©μ‹ λ¨λ‘ μ§€μ›ν•λ©°, κΈ°μ΅΄ μ„λ²„ μΈν”„λΌμ™€ μ™„λ²½ν•κ² μ—°λ™λ©λ‹λ‹¤. 