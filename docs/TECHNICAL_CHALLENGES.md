# 기술적 도전과제 및 해결방안

## 1. 자이로 센서 모호함 문제 🔥

### 문제 상황
- **한국어 모음 구분의 어려움**: '의', '외', '유' 등의 모음들이 손 모양만으로는 구분이 어려움
- **플렉스 센서 한계**: 손가락 굽힘만으로는 미세한 차이를 감지하기 어려움
- **공간적 움직임 필요**: 일부 수어는 손의 위치 변화와 방향성이 중요

### ✅ 해결방안 확정 (@양동건 - 2025.07.15)

#### LSM6DS3 센서 상세 스펙
```
- Accelerometer: range -4 ~ +4g, ±0.122mg 해상도
- Gyroscope: range -2000 ~ +2000 dps, ±70 mdps 해상도  
- Output: 104 Hz 고정 데이터 레이트
```

#### 1. **가속도 기반 방향 판단 (기본 알고리즘)**
```cpp
// 양동건 구현 - Arduino 코드
if (z < -0.8) direction = "손바닥이 위 (하늘)";
else if (z > 0.8) direction = "손바닥이 아래 (땅)"; 
else if (y < -0.8) direction = "손바닥이 앞 (사람 방향)";
else if (y > 0.8) direction = "손바닥이 뒤 (자기 쪽)";
else direction = "방향 모호함";  // 🚨 문제: 움직임 중 모호함
```

#### 2. **센서 퓨전 알고리즘 (드리프트 해결)**
```
선택지:
- Complementary Filter (가장 간단)
- Kalman Filter (정확하지만 복잡)  
- Madgwick Filter (좋은 성능/복잡도 비율) ⭐ 추천
- Mahony Filter (실시간 처리 최적화)
```

#### 3. **쿼터니언 → 오일러 각 변환**
- Roll, Pitch, Yaw 각도로 손 기울기 측정
- 절대 좌표계 기준 정확한 방향 판단
- 누적 오차(드리프트) 보정

#### 4. **실제 테스트 데이터 (양동건 측정)**
```
X: -0.042 g	Y: -0.602 g	Z: 0.817 g	→ 손바닥이 아래 (땅)
X: -0.031 g	Y: -0.762 g	Z: 0.588 g	→ 방향 모호함 🚨
X: -0.060 g	Y: -0.892 g	Z: 0.394 g	→ 손바닥이 앞 (사람 방향)
X: -0.042 g	Y: -1.002 g	Z: 0.107 g	→ 손바닥이 앞 (사람 방향)
```
**문제점**: 움직임 중간에 방향 모호함 발생 → 센서 퓨전 필요

### 측정 방식 설계 (업데이트)
```python
# 실제 LSM6DS3 데이터 구조 (104Hz)
sensor_data = {
    "flex_sensors": [f1, f2, f3, f4, f5],  # 플렉스 센서 5개
    "accelerometer": {
        "x": ax, "y": ay, "z": az,          # 가속도 (-4~+4g)
        "direction": direction_string        # 방향 판단 결과
    },
    "gyroscope": {
        "x": gx, "y": gy, "z": gz,          # 각속도 (-2000~+2000 dps)
        "roll": r, "pitch": p, "yaw": y      # 센서 퓨전 결과
    },
    "timestamp": timestamp,
    "sample_rate": 104                       # Hz
}
```

### 🚨 하드웨어 제작 문제 (@양동건)
```
플렉스 센서 연결 문제:
- 납땜 부재로 테스트 불가
- 핀 헤더와 납땜 필요  
- 암컷 케이블에 직접 연결 안됨

해결 방안:
flex → pin header → resistor → pin header → cable
nano → pin header
```

## 2. 데이터 수집 시스템 안정성

### 문제 상황
- **WiFi 통신 불안정**: 실시간 데이터 전송 시 패킷 손실
- **센서 노이즈**: 환경적 요인으로 인한 데이터 왜곡
- **동기화 문제**: 여러 센서 간의 시간 동기화

### 해결방안
1. **통신 안정성**
   - TCP 연결 유지 및 재연결 로직
   - 데이터 버퍼링 및 배치 전송
   - 오류 처리 및 재전송 메커니즘

2. **데이터 품질 관리**
   - 실시간 이상치 탐지
   - 센서 캘리브레이션 자동화
   - 노이즈 필터링 알고리즘

## 3. 한국어 수어 클래스 정의

### 문제 상황
- **표준화 부족**: KSL 표준 정의의 모호함
- **개인차**: 사용자별 제스처 스타일 차이
- **데이터 부족**: 기존 KSL 데이터셋의 부재

### 해결방안 (@YUBEEN @정재연)
1. **체계적 클래스 정의**
   - 모음 14개 (ㅏ, ㅑ, ㅓ, ㅕ, ㅗ, ㅛ, ㅜ, ㅠ, ㅡ, ㅣ, ㅢ, ㅐ, ㅒ, ㅔ, ㅖ)
   - 자음 19개 (ㄱ, ㄴ, ㄷ, ㄹ, ㅁ, ㅂ, ㅅ, ㅇ, ㅈ, ㅊ, ㅋ, ㅌ, ㅍ, ㅎ, ㄲ, ㄸ, ㅃ, ㅆ, ㅉ)
   - 숫자 10개 (0-9)

2. **데이터 수집 가이드라인**
   - 각 클래스별 최소 100개 샘플
   - 다양한 사용자 참여 (5명 이상)
   - 속도별 데이터 수집 (느림/보통/빠름)

3. **품질 관리**
   - 전문가 검증 과정
   - 일관성 검사 알고리즘
   - 라벨링 품질 관리

## 4. 실시간 처리 성능

### 문제 상황
- **레이턴시 요구사항**: 100ms 이하 응답시간
- **연산 복잡도**: 딥러닝 모델의 추론 시간
- **메모리 제약**: 임베디드 시스템 리소스 한계

### 해결방안
1. **모델 최적화**
   - 경량화 네트워크 설계
   - 양자화 및 프루닝 적용
   - 엣지 AI 가속기 활용

2. **시스템 최적화**
   - 비동기 처리 파이프라인
   - 캐싱 전략 적용
   - 리소스 모니터링

## 5. 확장성 및 유지보수

### 문제 상황
- **새로운 제스처 추가**: 기존 모델 재학습 필요
- **하드웨어 호환성**: 다양한 센서 모델 지원
- **버전 관리**: 모델 및 데이터 버전 관리

### 해결방안
1. **모듈화 설계**
   - 센서별 독립적 모듈
   - 플러그인 아키텍처
   - API 기반 컴포넌트 연결

2. **지속적 학습**
   - 온라인 학습 메커니즘
   - A/B 테스팅 프레임워크
   - 성능 모니터링 대시보드

## 다음 단계 우선순위 (2025.07.15 기준)

### 🔥 즉시 해결 (1주일 내)
1. **[Critical]** 자이로 센서 모호함 해결 방안 구체화 (@양동건)
2. **[High]** 기본 KSL 클래스 정의 완료 (@YUBEEN @정재연)

### ⚡ 단기 목표 (2주일 내)  
3. **[High]** 아두이노-WiFi-서버 통신 프로토타입 구현 (@양동건)
4. **[Medium]** 하드웨어 글러브 제작 시작 (@양동건)

### 📋 중기 목표 (4주일 내)
5. **[Medium]** 데이터 수집 가이드라인 확정 (@정재연)
6. **[Medium]** 전체 시스템 통합 테스트 (@이민우 @양동건)

### 🎯 최종 목표 (2025.08.15)
7. **[Low]** 성능 최적화 및 확장성 개선
8. **[Target]** 실제 데이터셋 수집 시작 